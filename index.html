<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
        body {
            margin:0;
            padding:0;
            margin-top:25px;
            background-color:pink;
        }
        .controls {
            margin:auto;
            width:80%;  
            text-align:center;  
        }
        button {
            font-size:calc(10vw);
            font-style: italic;
            background-color:transparent;
            border-radius:1000px;
            border-style:solid;
            border-width:1px; 
            height:80%;
            width:100%;
            cursor:pointer;
            box-shadow:4px 4px 8px black;
        }
        p{
            font-family: 'Courier New', Courier, monospace;
        }
        video{
          
          position:absolute;
          left:0;
          top:0;
          z-index:-1;
        }
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let socket = io();
      let el;
      let videoEl;
      let buttonEl;
      let vFile = 'www.thomasjohnmartinez.com/videos/wavesandparticlestrue.mp4';
      let windText = ['woosh', 'shhh', 'pffff'];

      function getRandomInt(max) {
        return Math.floor(Math.random() * max);
      }

      socket.on('time', (timeString) => {
        el = document.getElementById('server-time');
        el.innerHTML = 'Server time: ' + timeString;
      });

      socket.on('response', (controller) => {
        el = document.getElementById('gust-state');
        el.innerHTML = 'a new gust was initiated at ' +new Date().toTimeString();
        farocki();
      });
      function farocki() {
        videoEl = document.getElementById('lumi');
        buttonEl = document.getElementById('buttonText');
        //videoEl.style.borderRadius = Math.random()
        buttonEl.innerHTML = windText[getRandomInt(windText.length)];
        videoEl.src = 'https://www.thomasjohnmartinez.com/videos/wavesandparticlestrue.mp4'; 
      }
      function gust(){
        socket.emit("controller", "gust");
      }
    </script>
  </head>
  <body>
    <div class="controls">
        <h1>an angel's breath</h1>
        <p>click the button to control the wind-chime</p>
        <button id = "buttonText" onclick="gust()">pffff</button>
        <p id="gust-state">the gust state</p> 
        <video autoplay id="lumi" ></video>        
  </body>
</html>
